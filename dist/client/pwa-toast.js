"use client";var r=()=>{},b=(e,{onCached:o=r,onUpdated:s=r})=>{let t=n=>{n&&n.addEventListener("statechange",()=>{n.state==="installed"&&(navigator.serviceWorker.controller?s(e):o(e))})};t(e.installing),e.addEventListener("updatefound",()=>t(e.installing))},u=async({url:e="/sw.js",scope:o="/",onRegistered:s=r,onCached:t=r,onUpdated:n=r,onError:l=r}={})=>{if(typeof navigator=="undefined"||!("serviceWorker"in navigator))return{registered:!1};try{let a=await navigator.serviceWorker.register(e,{scope:o});return s(a),b(a,{onCached:t,onUpdated:n}),{registered:!0,registration:a}}catch(a){return l(a),console.warn("Service worker registration failed",a),{registered:!1,error:a}}};typeof window!="undefined"&&u().catch(()=>{});var y={background:"linear-gradient(135deg, #0ea5e9, #22c55e 60%, #f472b6)",text:"#0b132b",accent:"#0f172a"},v=({theme:e})=>{if(document.getElementById("pwa-toast-styles"))return;let o=document.createElement("style");o.id="pwa-toast-styles",o.textContent=`
		.pwa-toast-shell{position:fixed;z-index:2147483647;bottom:16px;right:16px;display:flex;gap:12px;align-items:center;max-width:360px;border-radius:14px;padding:12px 14px;box-shadow:0 12px 30px rgba(0,0,0,0.18);color:${e.text};background:${e.background};backdrop-filter: blur(6px);font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;}
		.pwa-toast-emoji{font-size:26px;filter: drop-shadow(0 2px 4px rgba(0,0,0,0.18));}
		.pwa-toast-content{flex:1;min-width:0;}
		.pwa-toast-title{font-weight:700;font-size:15px;margin:0 0 4px;display:flex;align-items:center;gap:6px;}
		.pwa-toast-body{margin:0;font-size:14px;line-height:1.45;}
		.pwa-toast-actions{display:flex;gap:8px;margin-left:auto;}
		.pwa-toast-btn{border:none;border-radius:10px;padding:8px 10px;font-weight:700;font-size:13px;cursor:pointer;color:#fff;background:${e.accent};box-shadow:0 2px 6px rgba(0,0,0,0.16);}
		.pwa-toast-btn.ghost{background:rgba(255,255,255,0.2);color:${e.accent};}
		@media (max-width: 520px){.pwa-toast-shell{left:12px;right:12px;bottom:12px;}}
	`,document.head.appendChild(o)},E=({theme:e,emoji:o})=>{v({theme:e});let s=null,t=document.createElement("div");t.className="pwa-toast-shell",t.style.display="none";let n=document.createElement("div");n.className="pwa-toast-emoji",n.textContent=o;let l=document.createElement("div");l.className="pwa-toast-content";let a=document.createElement("div");a.className="pwa-toast-title";let d=document.createElement("div");d.className="pwa-toast-body",l.append(a,d);let i=document.createElement("div");i.className="pwa-toast-actions",t.append(n,l,i),document.body.appendChild(t);let c=()=>{t.style.display="none",a.textContent="",d.textContent="",i.replaceChildren(),s&&clearTimeout(s)};return{show:({title:g,message:w,actionLabel:x,onAction:f,duration:h=8e3})=>{if(t.style.display="flex",a.textContent=g,d.textContent=w,i.replaceChildren(),x&&typeof f=="function"){let m=document.createElement("button");m.className="pwa-toast-btn",m.textContent=x,m.addEventListener("click",()=>{f(),c()}),i.appendChild(m)}let p=document.createElement("button");p.className="pwa-toast-btn ghost",p.textContent="Dismiss",p.addEventListener("click",c),i.appendChild(p),s&&clearTimeout(s),s=setTimeout(c,h)},hide:c}},T=({emoji:e="\u{1F3DD}\uFE0F\u{1F33A}\u{1F34D}",theme:o=y,url:s,scope:t}={})=>{if(typeof window=="undefined")return;let n=E({theme:o,emoji:e});u({url:s,scope:t,onCached:()=>n.show({title:"Ready offline",message:"Your islands are cached. Enjoy the sunshine!"}),onUpdated:()=>n.show({title:"Fresh tide arrived",message:"A new island build is ready.",actionLabel:"Reload",onAction:()=>window.location.reload()}),onError:()=>n.show({title:"Oops, rough seas",message:"Couldn\u2019t dock the service worker. Try again later."})})};export{T as installPwaToast};
//# sourceMappingURL=pwa-toast.js.map
