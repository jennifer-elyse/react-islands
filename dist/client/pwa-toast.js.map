{
  "version": 3,
  "sources": ["../../src/client/pwa-register.js", "../../src/client/pwa-toast.js"],
  "sourcesContent": ["\"use client\";\n\nconst noop = () => {};\n\nconst trackInstalling = (registration, { onCached = noop, onUpdated = noop }) => {\n\tconst listener = (worker) => {\n\t\tif (!worker) return;\n\t\tworker.addEventListener(\"statechange\", () => {\n\t\t\tif (worker.state === \"installed\")\n\t\t\t{\n\t\t\t\tif (navigator.serviceWorker.controller) onUpdated(registration);\n\t\t\t\telse onCached(registration);\n\t\t\t}\n\t\t});\n\t};\n\n\tlistener(registration.installing);\n\tregistration.addEventListener(\"updatefound\", () => listener(registration.installing));\n};\n\n/**\n * Registers a service worker. Safe to call multiple times; silently no-ops\n * when unsupported. Supports callbacks for lifecycle events.\n *\n * Example:\n * import { registerServiceWorker } from \"@jennifer.elyse/react-islands/client/pwa-register\";\n * registerServiceWorker({\n *   onUpdated: () => alert(\"New version available\"),\n *   onCached: () => console.info(\"App cached for offline use\"),\n * });\n */\nexport const registerServiceWorker = async ({\n\turl = \"/sw.js\",\n\tscope = \"/\",\n\tonRegistered = noop,\n\tonCached = noop,\n\tonUpdated = noop,\n\tonError = noop,\n} = {}) => {\n\tif (typeof navigator === \"undefined\" || !(\"serviceWorker\" in navigator)) return { registered: false };\n\n\ttry\n\t{\n\t\tconst registration = await navigator.serviceWorker.register(url, { scope });\n\t\tonRegistered(registration);\n\t\ttrackInstalling(registration, { onCached, onUpdated });\n\t\treturn { registered: true, registration };\n\t}\n\tcatch (err)\n\t{\n\t\tonError(err);\n\t\tconsole.warn(\"Service worker registration failed\", err);\n\t\treturn { registered: false, error: err };\n\t}\n};\n\n// Optional convenience: auto-register when imported directly in the browser\nif (typeof window !== \"undefined\")\n{\n\tregisterServiceWorker().catch(() => {});\n}\n", "\"use client\";\n\nimport { registerServiceWorker } from \"./pwa-register.js\";\n\nconst defaultTheme = {\n\tbackground: \"linear-gradient(135deg, #0ea5e9, #22c55e 60%, #f472b6)\",\n\ttext: \"#0b132b\",\n\taccent: \"#0f172a\",\n};\n\nconst createStyles = ({ theme }) => {\n\tif (document.getElementById(\"pwa-toast-styles\")) return;\n\tconst style = document.createElement(\"style\");\n\tstyle.id = \"pwa-toast-styles\";\n\tstyle.textContent = `\n\t\t.pwa-toast-shell{position:fixed;z-index:2147483647;bottom:16px;right:16px;display:flex;gap:12px;align-items:center;max-width:360px;border-radius:14px;padding:12px 14px;box-shadow:0 12px 30px rgba(0,0,0,0.18);color:${theme.text};background:${theme.background};backdrop-filter: blur(6px);font-family: \"Inter\", \"Segoe UI\", system-ui, -apple-system, sans-serif;}\n\t\t.pwa-toast-emoji{font-size:26px;filter: drop-shadow(0 2px 4px rgba(0,0,0,0.18));}\n\t\t.pwa-toast-content{flex:1;min-width:0;}\n\t\t.pwa-toast-title{font-weight:700;font-size:15px;margin:0 0 4px;display:flex;align-items:center;gap:6px;}\n\t\t.pwa-toast-body{margin:0;font-size:14px;line-height:1.45;}\n\t\t.pwa-toast-actions{display:flex;gap:8px;margin-left:auto;}\n\t\t.pwa-toast-btn{border:none;border-radius:10px;padding:8px 10px;font-weight:700;font-size:13px;cursor:pointer;color:#fff;background:${theme.accent};box-shadow:0 2px 6px rgba(0,0,0,0.16);}\n\t\t.pwa-toast-btn.ghost{background:rgba(255,255,255,0.2);color:${theme.accent};}\n\t\t@media (max-width: 520px){.pwa-toast-shell{left:12px;right:12px;bottom:12px;}}\n\t`;\n\tdocument.head.appendChild(style);\n};\n\nconst createToast = ({ theme, emoji }) => {\n\tcreateStyles({ theme });\n\tlet hideTimer = null;\n\n\tconst shell = document.createElement(\"div\");\n\tshell.className = \"pwa-toast-shell\";\n\tshell.style.display = \"none\";\n\n\tconst icon = document.createElement(\"div\");\n\ticon.className = \"pwa-toast-emoji\";\n\ticon.textContent = emoji;\n\n\tconst content = document.createElement(\"div\");\n\tcontent.className = \"pwa-toast-content\";\n\tconst titleEl = document.createElement(\"div\");\n\ttitleEl.className = \"pwa-toast-title\";\n\tconst bodyEl = document.createElement(\"div\");\n\tbodyEl.className = \"pwa-toast-body\";\n\tcontent.append(titleEl, bodyEl);\n\n\tconst actions = document.createElement(\"div\");\n\tactions.className = \"pwa-toast-actions\";\n\n\tshell.append(icon, content, actions);\n\tdocument.body.appendChild(shell);\n\n\tconst hide = () => {\n\t\tshell.style.display = \"none\";\n\t\ttitleEl.textContent = \"\";\n\t\tbodyEl.textContent = \"\";\n\t\tactions.replaceChildren();\n\t\tif (hideTimer) clearTimeout(hideTimer);\n\t};\n\n\tconst show = ({ title, message, actionLabel, onAction, duration = 8000 }) => {\n\t\tshell.style.display = \"flex\";\n\t\ttitleEl.textContent = title;\n\t\tbodyEl.textContent = message;\n\n\t\tactions.replaceChildren();\n\t\tif (actionLabel && typeof onAction === \"function\")\n\t\t{\n\t\t\tconst btn = document.createElement(\"button\");\n\t\t\tbtn.className = \"pwa-toast-btn\";\n\t\t\tbtn.textContent = actionLabel;\n\t\t\tbtn.addEventListener(\"click\", () => {\n\t\t\t\tonAction();\n\t\t\t\thide();\n\t\t\t});\n\t\t\tactions.appendChild(btn);\n\t\t}\n\n\t\tconst close = document.createElement(\"button\");\n\t\tclose.className = \"pwa-toast-btn ghost\";\n\t\tclose.textContent = \"Dismiss\";\n\t\tclose.addEventListener(\"click\", hide);\n\t\tactions.appendChild(close);\n\n\t\tif (hideTimer) clearTimeout(hideTimer);\n\t\thideTimer = setTimeout(hide, duration);\n\t};\n\n\treturn { show, hide };\n};\n\n/**\n * Registers the service worker and shows a kawaii tropical toast when\n * the PWA is ready offline, updated, or fails.\n */\nexport const installPwaToast = ({\n\temoji = \"\uD83C\uDFDD\uFE0F\uD83C\uDF3A\uD83C\uDF4D\",\n\ttheme = defaultTheme,\n\turl,\n\tscope,\n} = {}) => {\n\tif (typeof window === \"undefined\") return;\n\n\tconst toast = createToast({ theme, emoji });\n\n\tregisterServiceWorker({\n\t\turl,\n\t\tscope,\n\t\tonCached: () => toast.show({ title: \"Ready offline\", message: \"Your islands are cached. Enjoy the sunshine!\" }),\n\t\tonUpdated: () => toast.show({ title: \"Fresh tide arrived\", message: \"A new island build is ready.\", actionLabel: \"Reload\", onAction: () => window.location.reload() }),\n\t\tonError: () => toast.show({ title: \"Oops, rough seas\", message: \"Couldn\u2019t dock the service worker. Try again later.\" }),\n\t});\n};"],
  "mappings": "aAEA,IAAMA,EAAO,IAAM,CAAC,EAEdC,EAAkB,CAACC,EAAc,CAAE,SAAAC,EAAWH,EAAM,UAAAI,EAAYJ,CAAK,IAAM,CAChF,IAAMK,EAAYC,GAAW,CACvBA,GACLA,EAAO,iBAAiB,cAAe,IAAM,CACxCA,EAAO,QAAU,cAEhB,UAAU,cAAc,WAAYF,EAAUF,CAAY,EACzDC,EAASD,CAAY,EAE5B,CAAC,CACF,EAEAG,EAASH,EAAa,UAAU,EAChCA,EAAa,iBAAiB,cAAe,IAAMG,EAASH,EAAa,UAAU,CAAC,CACrF,EAaaK,EAAwB,MAAO,CAC3C,IAAAC,EAAM,SACN,MAAAC,EAAQ,IACR,aAAAC,EAAeV,EACf,SAAAG,EAAWH,EACX,UAAAI,EAAYJ,EACZ,QAAAW,EAAUX,CACX,EAAI,CAAC,IAAM,CACV,GAAI,OAAO,WAAc,aAAe,EAAE,kBAAmB,WAAY,MAAO,CAAE,WAAY,EAAM,EAEpG,GACA,CACC,IAAME,EAAe,MAAM,UAAU,cAAc,SAASM,EAAK,CAAE,MAAAC,CAAM,CAAC,EAC1E,OAAAC,EAAaR,CAAY,EACzBD,EAAgBC,EAAc,CAAE,SAAAC,EAAU,UAAAC,CAAU,CAAC,EAC9C,CAAE,WAAY,GAAM,aAAAF,CAAa,CACzC,OACOU,EACP,CACC,OAAAD,EAAQC,CAAG,EACX,QAAQ,KAAK,qCAAsCA,CAAG,EAC/C,CAAE,WAAY,GAAO,MAAOA,CAAI,CACxC,CACD,EAGI,OAAO,QAAW,aAErBL,EAAsB,EAAE,MAAM,IAAM,CAAC,CAAC,ECvDvC,IAAMM,EAAe,CACpB,WAAY,yDACZ,KAAM,UACN,OAAQ,SACT,EAEMC,EAAe,CAAC,CAAE,MAAAC,CAAM,IAAM,CACnC,GAAI,SAAS,eAAe,kBAAkB,EAAG,OACjD,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,GAAK,mBACXA,EAAM,YAAc;AAAA,0NACqMD,EAAM,IAAI,eAAeA,EAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uIAM5HA,EAAM,MAAM;AAAA,gEACnFA,EAAM,MAAM;AAAA;AAAA,GAG3E,SAAS,KAAK,YAAYC,CAAK,CAChC,EAEMC,EAAc,CAAC,CAAE,MAAAF,EAAO,MAAAG,CAAM,IAAM,CACzCJ,EAAa,CAAE,MAAAC,CAAM,CAAC,EACtB,IAAII,EAAY,KAEVC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,kBAClBA,EAAM,MAAM,QAAU,OAEtB,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,kBACjBA,EAAK,YAAcH,EAEnB,IAAMI,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,oBACpB,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,kBACpB,IAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,iBACnBF,EAAQ,OAAOC,EAASC,CAAM,EAE9B,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,oBAEpBL,EAAM,OAAOC,EAAMC,EAASG,CAAO,EACnC,SAAS,KAAK,YAAYL,CAAK,EAE/B,IAAMM,EAAO,IAAM,CAClBN,EAAM,MAAM,QAAU,OACtBG,EAAQ,YAAc,GACtBC,EAAO,YAAc,GACrBC,EAAQ,gBAAgB,EACpBN,GAAW,aAAaA,CAAS,CACtC,EA8BA,MAAO,CAAE,KA5BI,CAAC,CAAE,MAAAQ,EAAO,QAAAC,EAAS,YAAAC,EAAa,SAAAC,EAAU,SAAAC,EAAW,GAAK,IAAM,CAM5E,GALAX,EAAM,MAAM,QAAU,OACtBG,EAAQ,YAAcI,EACtBH,EAAO,YAAcI,EAErBH,EAAQ,gBAAgB,EACpBI,GAAe,OAAOC,GAAa,WACvC,CACC,IAAME,EAAM,SAAS,cAAc,QAAQ,EAC3CA,EAAI,UAAY,gBAChBA,EAAI,YAAcH,EAClBG,EAAI,iBAAiB,QAAS,IAAM,CACnCF,EAAS,EACTJ,EAAK,CACN,CAAC,EACDD,EAAQ,YAAYO,CAAG,CACxB,CAEA,IAAMC,EAAQ,SAAS,cAAc,QAAQ,EAC7CA,EAAM,UAAY,sBAClBA,EAAM,YAAc,UACpBA,EAAM,iBAAiB,QAASP,CAAI,EACpCD,EAAQ,YAAYQ,CAAK,EAErBd,GAAW,aAAaA,CAAS,EACrCA,EAAY,WAAWO,EAAMK,CAAQ,CACtC,EAEe,KAAAL,CAAK,CACrB,EAMaQ,EAAkB,CAAC,CAC/B,MAAAhB,EAAQ,oCACR,MAAAH,EAAQF,EACR,IAAAsB,EACA,MAAAC,CACD,EAAI,CAAC,IAAM,CACV,GAAI,OAAO,QAAW,YAAa,OAEnC,IAAMC,EAAQpB,EAAY,CAAE,MAAAF,EAAO,MAAAG,CAAM,CAAC,EAE1CoB,EAAsB,CACrB,IAAAH,EACA,MAAAC,EACA,SAAU,IAAMC,EAAM,KAAK,CAAE,MAAO,gBAAiB,QAAS,8CAA+C,CAAC,EAC9G,UAAW,IAAMA,EAAM,KAAK,CAAE,MAAO,qBAAsB,QAAS,+BAAgC,YAAa,SAAU,SAAU,IAAM,OAAO,SAAS,OAAO,CAAE,CAAC,EACrK,QAAS,IAAMA,EAAM,KAAK,CAAE,MAAO,mBAAoB,QAAS,yDAAqD,CAAC,CACvH,CAAC,CACF",
  "names": ["noop", "trackInstalling", "registration", "onCached", "onUpdated", "listener", "worker", "registerServiceWorker", "url", "scope", "onRegistered", "onError", "err", "defaultTheme", "createStyles", "theme", "style", "createToast", "emoji", "hideTimer", "shell", "icon", "content", "titleEl", "bodyEl", "actions", "hide", "title", "message", "actionLabel", "onAction", "duration", "btn", "close", "installPwaToast", "url", "scope", "toast", "registerServiceWorker"]
}
