{
  "version": 3,
  "sources": ["../../src/client/pwa-register.js"],
  "sourcesContent": ["\"use client\";\n\nconst noop = () => {};\n\nconst trackInstalling = (registration, { onCached = noop, onUpdated = noop }) => {\n\tconst listener = (worker) => {\n\t\tif (!worker) return;\n\t\tworker.addEventListener(\"statechange\", () => {\n\t\t\tif (worker.state === \"installed\")\n\t\t\t{\n\t\t\t\tif (navigator.serviceWorker.controller) onUpdated(registration);\n\t\t\t\telse onCached(registration);\n\t\t\t}\n\t\t});\n\t};\n\n\tlistener(registration.installing);\n\tregistration.addEventListener(\"updatefound\", () => listener(registration.installing));\n};\n\n/**\n * Registers a service worker. Safe to call multiple times; silently no-ops\n * when unsupported. Supports callbacks for lifecycle events.\n *\n * Example:\n * import { registerServiceWorker } from \"@jennifer.elyse/react-islands/client/pwa-register\";\n * registerServiceWorker({\n *   onUpdated: () => alert(\"New version available\"),\n *   onCached: () => console.info(\"App cached for offline use\"),\n * });\n */\nexport const registerServiceWorker = async ({\n\turl = \"/sw.js\",\n\tscope = \"/\",\n\tonRegistered = noop,\n\tonCached = noop,\n\tonUpdated = noop,\n\tonError = noop,\n} = {}) => {\n\tif (typeof navigator === \"undefined\" || !(\"serviceWorker\" in navigator)) return { registered: false };\n\n\ttry\n\t{\n\t\tconst registration = await navigator.serviceWorker.register(url, { scope });\n\t\tonRegistered(registration);\n\t\ttrackInstalling(registration, { onCached, onUpdated });\n\t\treturn { registered: true, registration };\n\t}\n\tcatch (err)\n\t{\n\t\tonError(err);\n\t\tconsole.warn(\"Service worker registration failed\", err);\n\t\treturn { registered: false, error: err };\n\t}\n};\n\n// Optional convenience: auto-register when imported directly in the browser\nif (typeof window !== \"undefined\")\n{\n\tregisterServiceWorker().catch(() => {});\n}\n"],
  "mappings": "aAEA,IAAMA,EAAO,IAAM,CAAC,EAEdC,EAAkB,CAACC,EAAc,CAAE,SAAAC,EAAWH,EAAM,UAAAI,EAAYJ,CAAK,IAAM,CAChF,IAAMK,EAAYC,GAAW,CACvBA,GACLA,EAAO,iBAAiB,cAAe,IAAM,CACxCA,EAAO,QAAU,cAEhB,UAAU,cAAc,WAAYF,EAAUF,CAAY,EACzDC,EAASD,CAAY,EAE5B,CAAC,CACF,EAEAG,EAASH,EAAa,UAAU,EAChCA,EAAa,iBAAiB,cAAe,IAAMG,EAASH,EAAa,UAAU,CAAC,CACrF,EAaaK,EAAwB,MAAO,CAC3C,IAAAC,EAAM,SACN,MAAAC,EAAQ,IACR,aAAAC,EAAeV,EACf,SAAAG,EAAWH,EACX,UAAAI,EAAYJ,EACZ,QAAAW,EAAUX,CACX,EAAI,CAAC,IAAM,CACV,GAAI,OAAO,WAAc,aAAe,EAAE,kBAAmB,WAAY,MAAO,CAAE,WAAY,EAAM,EAEpG,GACA,CACC,IAAME,EAAe,MAAM,UAAU,cAAc,SAASM,EAAK,CAAE,MAAAC,CAAM,CAAC,EAC1E,OAAAC,EAAaR,CAAY,EACzBD,EAAgBC,EAAc,CAAE,SAAAC,EAAU,UAAAC,CAAU,CAAC,EAC9C,CAAE,WAAY,GAAM,aAAAF,CAAa,CACzC,OACOU,EACP,CACC,OAAAD,EAAQC,CAAG,EACX,QAAQ,KAAK,qCAAsCA,CAAG,EAC/C,CAAE,WAAY,GAAO,MAAOA,CAAI,CACxC,CACD,EAGI,OAAO,QAAW,aAErBL,EAAsB,EAAE,MAAM,IAAM,CAAC,CAAC",
  "names": ["noop", "trackInstalling", "registration", "onCached", "onUpdated", "listener", "worker", "registerServiceWorker", "url", "scope", "onRegistered", "onError", "err"]
}
